.navbar {
	display: flex;
	justify-content: space-between;
	align-items: center;
	/* 垂直置中 */
	padding: 15px 65px 15px 45px;
	height: 80px;
	background: #F2EFE9;

	.Logo {
		width: 80px;
	}

	.menu {
		font-size: 18px;
		font-weight: 600;
		color: #333;
		display: flex;
		align-items: center;
		gap: 20px;
		list-style: none;

		>li {
			position: relative;
			/* 給 submenu 定位 */
			display: block;
			/* 讓 <a> 與 submenu 同層、整塊可 hover */

			>a,
			>p {
				display: block;
				/* 擴大可 hover 區 */
				text-decoration: none;
				color: #333;
				padding: 12px 0;
				/* 上下留白，避免斷開 */
				transition: color .2s ease, font-weight .2s ease;
				cursor: pointer;
				/* p 可點擊的視覺回饋 */
			}

			/* 下拉選單 */
			>.submenu {
				position: absolute;
				top: 100%;
				left: 0;
				min-width: 180px;
				background: #F2EFE9;
				/* 與頂導同系的米色底 */
				border: 1px solid #ddd;
				border-radius: 4px;
				box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
				padding: 8px 0;

				/* 透明橋樑：填補 a 與 submenu 間隙 */
				margin-top: 0;
				padding-top: 8px;

				opacity: 0;
				visibility: hidden;
				transform: translateY(8px);
				transition: opacity .18s ease, transform .18s ease, visibility 0s linear .18s;
				z-index: 1000;

				li {
					position: relative;

					a,
					p {
						display: flex;
						/* 同一個 clickable 區塊 */
						flex-direction: column;
						/* 標題/副標上下排 */
						align-items: flex-start;
						padding: 8px 16px;
						font-size: 16px;
						color: #333;
						transition: color .2s ease, font-weight .2s ease, background-color .2s ease;

						&:hover,
						&:focus {
							background: #f8f8f8;
							font-weight: 700;
							color: #5A4632;
						}

						.subnote {
							font-size: 13px;
							font-weight: 700;
							color: #A8894A;
							/* 比 #CBB27A 再深一點 */
							margin-top: 2px;
							padding-left: 9px;

							/* 預設隱藏 */
							max-height: 0;
							opacity: 0;
							overflow: hidden;
							transition: opacity .2s ease, max-height .2s ease;
						}

						/* hover Link 才顯示 subnote */
						&:hover .subnote,
						&:focus .subnote {
							max-height: 20px;
							opacity: 1;
						}
					}
				}
			}

			/* 只在桌面滑鼠環境用 hover 展開，避免點擊後殘留 */
			@media (hover: hover) and (pointer: fine) {
				&:hover>.submenu {
					opacity: 1;
					visibility: visible;
					transform: translateY(0);
					transition-delay: 0s;
				}

				/* 父層高亮同步（hover 狀態） */
				&:hover>a,
				&:hover>p {
					color: #5A4632;
					font-weight: 700;
				}
			}

			/* 點擊/觸控開合（由 React 加上 .open） */
			&.open>.submenu {
				opacity: 1;
				visibility: visible;
				transform: translateY(0);
				transition-delay: 0s;
			}

			&.open>a,
			&.open>p {
				color: #5A4632;
				font-weight: 700;
			}

			/* =========================
			   ✅ 長亮（active（啟用中））
			   ========================= */

			/* 頂層 NavLink 自己是當前頁 */
			>a.active,
			>a[aria-current="page"] {
				font-weight: 700;
				color: #5A4632;
			}

			/* 子選單 NavLink 是當前頁 */
			.submenu a.active,
			.submenu a[aria-current="page"] {
				font-weight: 700;
				color: #5A4632;
			}

			/* React 於父層 li 加上的 is-active（群組長亮） */
			&.is-active>a,
			&.is-active>p {
				font-weight: 700;
				color: #5A4632;
			}

			/* 有支援 :has() 時，子項 active 也自動讓父層長亮（免 JS） */
			@supports selector(:has(*)) {

				&:has(.submenu a.active),
				&:has(.submenu a[aria-current="page"]) {

					>a,
					>p {
						font-weight: 700;
						color: #5A4632;
					}
				}
			}
		}
	}
}